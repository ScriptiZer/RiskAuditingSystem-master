@using Microsoft.AspNetCore.Http
@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
@inject IUserContext UserContext
@using Newtonsoft.Json
@{
    var userPermissionsJson = "";
    var userPermissions = new List<RolesPermissions>();
    var httpContext = ViewContext.HttpContext;
    if (httpContext != null)
    {
        userPermissionsJson = httpContext.Session.GetString("UserPermissions");
        userPermissions = JsonConvert.DeserializeObject<List<RolesPermissions>>(userPermissionsJson, new JsonSerializerSettings
                {
                    ReferenceLoopHandling = ReferenceLoopHandling.Ignore
                });

        // if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Years" && p.View == true))
        // {
        //     <h1 style="font-size: 100px;">Hello</h1>
        // }
    }
}


<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>ONYX IV - @ViewData["Title"]</title>
    <!-- base:css -->
    <link rel="stylesheet" href="~/vendors/mdi/css/materialdesignicons.min.css">
    <link rel="stylesheet" href="~/vendors/css/vendor.bundle.base.css">
    <!-- endinject -->
    <!-- plugin css for this page -->
    <!-- End plugin css for this page -->
    <!-- inject:css -->
    <link rel="stylesheet" href="~/css/style.css">
    <link href="~/HeaderStyle/css/styleHeader.css" rel="stylesheet">

    <!-- endinject -->
    <link rel="shortcut icon" href="~/images/logo.png" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.20/summernote-bs5.min.css" integrity="sha512-ngQ4IGzHQ3s/Hh8kMyG4FC74wzitukRMIcTOoKT3EyzFZCILOPF0twiXOQn75eDINUfKBYmzYn2AA8DkAk8veQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.5/dist/sweetalert2.min.css">

    <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js" integrity="sha512-AA1Bzp5Q0K1KanKKmvN/4d3IRKVlv9PYgwFPvm32nPO6QS8yH1HO7LbgB1pgiOxPtfeg5zEn2ba64MUcqJx6CA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <style>

        tr th {
            font-weight: 900 !important;
            text-transform: uppercase;
        }

        body::-webkit-scrollbar {
            width: 10px;
            background-color: #F5F5F5;
        }

        body::-webkit-scrollbar-thumb {
            background-color: #6071ac;
        }

        body::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            background-color: #F5F5F5;
        }


        .table-responsive::-webkit-scrollbar {
            width: 10px;
            background-color: #F5F5F5;
        }

        .table-responsive::-webkit-scrollbar-thumb {
            background-color: #6071ac;
        }

        .table-responsive::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            background-color: #F5F5F5;
        }

        #sidebar::-webkit-scrollbar {
            width: 6px;
            background-color: #F5F5F5;
        }

        #sidebar::-webkit-scrollbar-thumb {
            background-color: #6071ac;
        }

        #sidebar::-webkit-scrollbar-track {
            -webkit-box-shadow: inset 0 0 6px rgba(0,0,0,0.3);
            background-color: #F5F5F5;
        }

        #Search {
            margin-top: 5px;
        }

        .table-responsive {
            margin-top: 10px;
        }

        .cardbox {
            cursor: pointer;
            box-shadow: inset 4px 1px 13px 0px;
            border-radius: 10px;
            height: 70px;
        }

        .btn-light {
            margin-right: 10px;
        }

        .fa-solid {
            font-size: 18px;
            margin-right: 3px;
        }

        .fa-circle {
            font-size: 5px;
            margin-left: 8px;
        }

        .fa-trash {
            color: #e94848;
        }

        label.error {
            color: #ff0000;
        }

        input.error, select.error {
            border: 1px solid #ff0000;
        }

        .navSub {
            padding-left: 23px !important;
        }

        .navSub_Sub {
            padding-left: 28px !important;
        }

        .navSub_Subs {
            padding-left: 40px !important;
        }

        .error {
            color: red;
        }

        .input-validation-error {
            border: 1px solid red;
        }

        .arrowHeader {
            color: #ee95ff !important;
            font-weight: 900;
        }
    </style>
    <style>
        table {
            overflow: hidden;
        }
    </style>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

</head>
<body>
    <div class="container-scroller d-flex">

        <nav class="sidebar sidebar-offcanvas" id="sidebar">
            <ul class="metismenu nav" id="menu">
                <li style="color:#fff;" class="sidebar-category">Dashboard</li>
                <li class="nav-item">
                    <a class="nav-link arrowHeader" style="margin-left: -16px;" asp-action="Dashboard" asp-controller="Home" aria-expanded="false">
                        <i class="icon-speedometer menu-icon"></i><span class="nav-text"><i class="fa-solid fa-chart-simple arrowHeader"></i> Dashboard</span>
                    </a>
                </li>

                <li style="color:#fff;" class="sidebar-category">Components</li>

                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Years" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Calendar" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Users" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Roles" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Risk Category" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Risk Impact" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Risk Likelihood" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Control Type" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Control Process" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Control Frequency" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Control Effectiveness" && p.View == true) @* ||
                userPermissions.Any(p => p.Permission.Name == "Permissions" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "RolesPermissions" && p.View == true )*@)
                {
                    <li class="mega-menu mega-menu-sm nav-item">
                        <a class="has-arrow nav-link arrowHeader" href="javascript:void()" aria-expanded="false">
                            <i class="fa-solid fa-star arrowHeader"></i><span class="nav-text">Set Up</span>
                        </a>
                        <ul aria-expanded="false">
                            <li>
                                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Category" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Risk Impact" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Risk Likelihood" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Control Type" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Control Process" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Control Frequency" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Control Effectiveness" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Operation Budget Types" && p.View == true))
                                {
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false">Lockups</a>
                                    <ul aria-expanded="false">
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Category" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="RiskCategorysscs"><i class="fa-solid fa-circle"></i> Risk Category</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Impact" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="RiskImpactes"><i class="fa-solid fa-circle"></i> Risk Impact</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Likelihood" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="RiskLikehoodes"><i class="fa-solid fa-circle"></i> Risk Likelihood</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Control Type" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="ControlTypes"><i class="fa-solid fa-circle"></i> Control Type</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Control Process" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="ControlProcesses"><i class="fa-solid fa-circle"></i> Control Process</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Control Frequency" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="ControlFrequencyss"><i class="fa-solid fa-circle"></i> Control Frequency</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Control Effectiveness" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="ControlEffectivenessc"><i class="fa-solid fa-circle"></i> Control Effectiveness</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Operation Budget Types" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="OperationBudgetType"><i class="fa-solid fa-circle"></i> Operation Budget Types</a>
                                            </li>
                                        }
                                    </ul>
                                }
                            </li>
                            <li>
                                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Years" && p.View == true) ||
                               userPermissions.Any(p => p.Permission.Name == "Calendar" && p.View == true))
                                {
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false">Period</a>
                                    <ul aria-expanded="false">
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Years" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Year"><i class="fa-solid fa-circle"></i> Years</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Calendar" && p.View == true))
                                        {
                                            <li class="nav-item">
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Calendar"><i class="fa-solid fa-circle"></i> Calendar</a>
                                            </li>
                                        }
                                    </ul>
                                }
                            </li>
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Users" && p.View == true))
                            {
                                <li class="nav-item"> <a class="nav-link navSub" asp-action="Index" asp-controller="User">Users</a></li>
                            }
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Roles" && p.View == true))
                            {
                                <li class="nav-item"> <a class="nav-link navSub" asp-action="Index" asp-controller="Role">Roles</a></li>
                            }
                            @*  @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Permissions" && p.View == true))
                        { *@
                            <li class="nav-item"> <a class="nav-link navSub" asp-action="Index" asp-controller="Permission">Permission</a></li>
                            @* }
                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Roles Permissions" && p.View == true))
                        { *@
                            <li class="nav-item"> <a class="nav-link navSub" asp-action="Index" asp-controller="RolesPermissions">Roles Permissions</a></li>
                            @* } *@
                        </ul>
                    </li>
                }

                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Assessment" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Risk Identification" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Control" && p.View == true))
                {
                    <li class="mega-menu mega-menu-sm nav-item">
                        <a class="has-arrow nav-link arrowHeader" href="javascript:void()" aria-expanded="false">
                            <i class="fa-solid fa-database arrowHeader"></i><span class="nav-text">Database</span>
                        </a>
                        <ul aria-expanded="false">
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Assessment" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Risk Identification" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Control" && p.View == true))
                            {
                                <li class="nav-item">
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false">
                                        <span class="nav-text">Risk Assessments</span>
                                    </a>
                                    <ul aria-expanded="false">
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Identification" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="RiskIdentification"><i class="fa-solid fa-circle"></i> Risk Identification</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Control" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Control"><i class="fa-solid fa-circle"></i> Controls</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Risk Assessment" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="RiskAssessment"><i class="fa-solid fa-circle"></i> Risk Assessment</a></li>
                                        }
                                    </ul>
                                </li>
                            }
                        </ul>
                    </li>
                }

                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Industry" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Company" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Department" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Function" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Activity" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Objective" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Task" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Practice" && p.View == true) ||
      @*           userPermissions.Any(p => p.Permission.Name == "Risk Assessment" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Risk Identification" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Control" && p.View == true) || *@
                userPermissions.Any(p => p.Permission.Name == "Audit Resources" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Budget" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Draft Audit Plan" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Final Audit Plan" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Planning Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Field Work Weekly Meetings" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Year End Audit Closure Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Kick Off Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Process Understanding Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Draft Audit Report Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Final Audit Report Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Board Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Engagement Letter" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Process walkthrough" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Programs" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "List of Information" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Sampling" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Observation" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Finding" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Progress" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Work Progress" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Team Monitoring" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Draft Audit Reports" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Client Action Plans" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Final Audit Reports" && p.View == true))
                {
                    <li class="nav-item">

                        <a class="has-arrow arrowHeader nav-link" href="javascript:void()" aria-expanded="false">
                            <i class="fa-solid fa-microchip arrowHeader"></i> <span class="nav-text">Audit Process</span>
                        </a>
                        <ul aria-expanded="false">
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Industry" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Company" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Department" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Function" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Activity" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Objective" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Task" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Practice" && p.View == true))
                            {
                                <li class="nav-item">
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false">Audit Universe</a>
                                    <ul aria-expanded="false">
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Industry" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Industry"><i class="fa-solid fa-circle"></i> Industry</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Company" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Company"><i class="fa-solid fa-circle"></i> Companies</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Department" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Department"><i class="fa-solid fa-circle"></i> Departments</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Function" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Function"><i class="fa-solid fa-circle"></i> Functions</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Activity" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Activity"><i class="fa-solid fa-circle"></i> Activities</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Objective" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Objective"><i class="fa-solid fa-circle"></i> Objectives</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Task" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Task"><i class="fa-solid fa-circle"></i> Tasks</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Practice" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="Practice"><i class="fa-solid fa-circle"></i> Practices</a></li>
                                        }
                                    </ul>
                                </li>
                            }


                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Annual Risk Assessment" && p.View == true))
                            {
                                 <a style="margin-left:-7px;" class="nav-link navSub_Sub" asp-action="AnnualRiskAssessment" asp-controller="RiskAssessment"> Annual Risk Assessment</a>
                            }


                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Resources" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Audit Budget" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Draft Audit Plan" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Final Audit Plan" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Audit Budget Operations" && p.View == true))
                            {
                                <li class="nav-item">
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false">
                                        <span class="nav-text">Audit Plans</span>
                                    </a>

                                    <ul aria-expanded="false">
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Resources" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="AuditResource"><i class="fa-solid fa-circle"></i> Audit Resources</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Budget" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="AuditBudget"><i class="fa-solid fa-circle"></i> Audit Budget</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Draft Audit Plan" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="DraftAuditPlan"><i class="fa-solid fa-circle"></i> Audit Draft Plan</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Final Audit Plan" && p.View == true))
                                        {
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="FinalAuditPlan"><i class="fa-solid fa-circle"></i> Audit Final Plan</a></li>
                                        }
                                    </ul>
                                </li>
                            }


                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Planning Meeting" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Audit Field Work Weekly Meetings" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Year End Audit Closure Meeting" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Kick Off Meeting" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Process Understanding Meeting" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Draft Audit Report Meeting" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Final Audit Report Meeting" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Board Meeting" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Engagement Letter" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Process walkthrough" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Audit Programs" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "List of Information" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Sampling" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Observation" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Finding" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Audit Progress" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Audit Work Progress" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Audit Team Monitoring" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Draft Audit Reports" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Client Action Plans" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Final Audit Reports" && p.View == true))
                            {
                                <li class="nav-item">
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false">
                                        <span class="nav-text">Audit Filed Work</span>
                                    </a>
                                    <ul aria-expanded="false">
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Planning Meeting" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Audit Field Work Weekly Meetings" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Year End Audit Closure Meeting" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Kick Off Meeting" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Process Understanding Meeting" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Draft Audit Report Meeting" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Final Audit Report Meeting" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Board Meeting" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Engagement Letter" && p.View == true))
                                        {
                                            <li>
                                                <a class="has-arrow nav-link navSub_Sub" href="javascript:void()" aria-expanded="false"><i class="fa-solid fa-circle"></i> Audit Engagement</a>
                                                <ul aria-expanded="false">
                                                    @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Planning Meeting" && p.View == true) ||
                                                   userPermissions.Any(p => p.Permission.Name == "Audit Field Work Weekly Meetings" && p.View == true) ||
                                                   userPermissions.Any(p => p.Permission.Name == "Year End Audit Closure Meeting" && p.View == true) ||
                                                   userPermissions.Any(p => p.Permission.Name == "Kick Off Meeting" && p.View == true) ||
                                                   userPermissions.Any(p => p.Permission.Name == "Process Understanding Meeting" && p.View == true) ||
                                                   userPermissions.Any(p => p.Permission.Name == "Draft Audit Report Meeting" && p.View == true) ||
                                                   userPermissions.Any(p => p.Permission.Name == "Final Audit Report Meeting" && p.View == true) ||
                                                   userPermissions.Any(p => p.Permission.Name == "Board Meeting" && p.View == true))
                                                    {
                                                        <li class="nav-item">
                                                            <a class="nav-link navSub_Subs" data-bs-toggle="modal" data-bs-target="#exampleModalAuditEngagement" href="#" data-bs-whatever="@@mdo">
                                                                <i class="fa-solid fa-minus"></i> IA Meetings
                                                            </a>
                                                        </li>
                                                    }

                                                    @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Engagement Letter" && p.View == true))
                                                    {
                                                        <li class="nav-item"><a class="nav-link navSub_Subs" href="#" onclick="downloadFile('/Reports/01PurchasingEngagementMemorandum2023.docx','01PurchasingEngagementMemorandum2023.docx')"><i class="fa-solid fa-minus"></i> Engagement Letter</a></li>
                                                    }
                                                </ul>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Process walkthrough" && p.View == true))
                                        {
                                            <li>
                                                <a class="nav-link navSub_Sub" href="#" onclick="downloadFile('/Reports/ProcessUnderstandingPurchasingDepartement.docx','ProcessUnderstandingPurchasingDepartement')"><i class="fa-solid fa-circle"></i>Process walkthrough</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Programs" && p.View == true))
                                        {
                                            <!--href="/Reports/7AuditProgramsFinanceandPurchasing.xlsx" download="AuditProgram.xlsx"-->
                                            <li>
                                                <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="AuditProgram"><i class="fa-solid fa-circle"></i>Audit Programs</a>
                                            </li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "List of Information" && p.View == true))
                                        {
                                            <li>
                                                <a class="nav-link navSub_Sub" href="#" onclick="downloadFile('/Reports/listofDocumentsrequirements2023.xlsx','listofDocumentsrequirements2023')"><i class="fa-solid fa-circle"></i>List of Information</a>
                                            </li>
                                        }

                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Sampling" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Observation" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Finding" && p.View == true) ||
                                       userPermissions.Any(p => p.Permission.Name == "Audit Progress" && p.View == true))
                                        {
                                            <li>
                                                <a class="has-arrow nav-link navSub_Sub" href="javascript:void()" aria-expanded="false"><i class="fa-solid fa-circle"></i> Audit Field Tests</a>
                                                <ul aria-expanded="false">
                                                    @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Sampling" && p.View == true))
                                                    {
                                                        <li class="nav-item"> <a class="nav-link navSub_Subs" href="#"><i class="fa-solid fa-minus"></i> Sampling</a></li>
                                                    }
                                                    @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Finding" && p.View == true))
                                                    {
                                                        <li class="nav-item"> <a class="nav-link navSub_Subs" asp-action="Index" asp-controller="Finding"><i class="fa-solid fa-minus"></i> Findings</a></li>
                                                    }
                                                    @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Observation" && p.View == true))
                                                    {
                                                        <li class="nav-item"> <a class="nav-link navSub_Subs" asp-action="Index" asp-controller="Observation"><i class="fa-solid fa-minus"></i> Observations</a></li>
                                                    }
                                                    @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Progress" && p.View == true))
                                                    {
                                                        <li class="nav-item">
                                                            <a class="nav-link navSub_Subs" data-bs-toggle="modal" data-bs-target="#exampleModalAuditFieldTests" data-bs-whatever="@@mdo" href="#">
                                                                <i class="fa-solid fa-minus"></i> Audit Progress
                                                            </a>
                                                        </li>
                                                    }

                                                </ul>
                                            </li>
                                        }
                                    </ul>
                                </li>
                            }

                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Draft Audit Reports" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Client Action Plans" && p.View == true) ||
                           userPermissions.Any(p => p.Permission.Name == "Final Audit Reports" && p.View == true))
                            {
                                <li class="nav-item">
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false"> Audit Reports</a>
                                    <ul aria-expanded="false">
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Draft Audit Reports" && p.View == true))
                                        {
                                            <!-- onclick="downloadFile('/Reports/2023PurchasingAuditReportSHAMSTemplate.docx','2023PurchasingAuditReportSHAMSTemplate')"-->
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="DraftAuditReport"><i class="fa-solid fa-circle"></i> Draft Audit Reports</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Client Action Plans" && p.View == true))
                                        {
                                            <!-- onclick="downloadFile('/Reports/2023PurchasingAuditReportSHAMSTemplate.docx','2023PurchasingAuditReportSHAMSTemplate')"-->
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="ClientActionPlan"><i class="fa-solid fa-circle"></i> Client Action Plans</a></li>
                                        }
                                        @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Final Audit Reports" && p.View == true))
                                        {
                                            <!--onclick="downloadFile('/Reports/2023PurchasingAuditReportSHAMSTemplate.docx','2023PurchasingAuditReportSHAMSTemplate')"-->
                                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="FinalAuditReport"><i class="fa-solid fa-circle"></i> Final Audit Reports</a></li>
                                        }
                                    </ul>
                                </li>
                            }
                        </ul>
                    </li>
                }
                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Segregation of Duties" && p.View == true))
                {

                    <li class="mega-menu mega-menu-sm nav-item">
                        <a class="has-arrow nav-link arrowHeader" href="javascript:void()" aria-expanded="false">
                            <i class="fa-solid fa-book"></i><span class="nav-text">Segregation of Duties</span>
                        </a>
                        <ul aria-expanded="false">
                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="SegregationOfDuties" asp-route-sODTypeId="1"><i class="fa-solid fa-circle"></i> Cash & Electronic Funds <br>Transfer (EFT)</a></li>
                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="SegregationOfDuties" asp-route-sODTypeId="2"><i class="fa-solid fa-circle"></i> Account Receivable (A/R)</a></li>
                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="SegregationOfDuties" asp-route-sODTypeId="3"><i class="fa-solid fa-circle"></i> Accounts Payable (A/P),<br> Purchasing</a></li>
                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="SegregationOfDuties" asp-route-sODTypeId="4"><i class="fa-solid fa-circle"></i> Payroll</a></li>
                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="SegregationOfDuties" asp-route-sODTypeId="5"><i class="fa-solid fa-circle"></i> Property Records</a></li>
                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="SegregationOfDuties" asp-route-sODTypeId="6"><i class="fa-solid fa-circle"></i> Inventory</a></li>
                            <li class="nav-item"> <a class="nav-link navSub_Sub" asp-action="Index" asp-controller="SegregationOfDuties" asp-route-sODTypeId="7"><i class="fa-solid fa-circle"></i> General Accounting</a></li>
                        </ul>

                    </li>
                }
                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Field Tests" && p.View == true))
                {
                    <li class="mega-menu mega-menu-sm nav-item">
                        <a class="has-arrow nav-link arrowHeader" href="javascript:void()" aria-expanded="false">
                            <i class="fa-solid fa-plus arrowHeader"></i><span class="nav-text">Follow Up</span>
                        </a>
                        <ul aria-expanded="false">
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Field Tests" && p.View == true))
                            {
                                <li>
                                    <a class="has-arrow nav-link navSub" href="javascript:void()" aria-expanded="false">Published Audit Reports</a>
                                    <ul aria-expanded="false">
                                        <li class="nav-item"> <a class="nav-link navSub_Sub" href="#" onclick="downloadFile('/Reports/2023PurchasingAuditReportSHAMSTemplate.docx','2023PurchasingAuditReportSHAMSTemplate')"><i class="fa-solid fa-circle"></i> Audit Field Tests</a></li>
                                    </ul>
                                </li>
                            }
                        </ul>
                    </li>
                }

            </ul>
        </nav>


        <div class="container-fluid page-body-wrapper" style="margin-right:0;">
            <nav class="navbar col-lg-12 col-12 px-0 py-0 py-lg-4 d-flex flex-row" style="    z-index: 99;">
                <div class="navbar-menu-wrapper d-flex align-items-center justify-content-end">

                    <div class="navbar-brand-wrapper">
                        <a class="navbar-brand brand-logo" asp-action="Dashboard" asp-controller="Home"><img style="width:50px" src="~/images/logo.png" alt="logo" /><span style="color:white">ONYX IV</span></a>
                    </div>
                    <ul class="navbar-nav navbar-nav-right">
                        <li class="nav-item nav-profile dropdown">
                            <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown" id="profileDropdown">

                                <span style="font-size:18px;" class="nav-profile-name">
                                    Welcome back, @HttpContextAccessor.HttpContext.Session.GetString("UserName")
                                </span>
                            </a>
                            <div class="dropdown-menu dropdown-menu-right navbar-dropdown" aria-labelledby="profileDropdown">
                                <a asp-action="Logout" asp-controller="Account" class="dropdown-item">
                                    <i class="mdi mdi-logout text-primary"></i>
                                    Logout
                                </a>
                            </div>
                        </li>
                    </ul>

                    <button style="position:absolute;left:0;margin:-7px;" class="navbar-toggler navbar-toggler-right d-lg-none align-self-center" type="button" data-toggle="offcanvas">
                        <span class="mdi mdi-menu"></span>
                    </button>
                </div>

            </nav>
            <!-- partial -->
            <div class="main-panel">
                <div class="content-wrapper">
                    @RenderBody()
                </div>
                <footer class="footer">
                    <div class="card">
                        <div class="card-body">
                            <div class="d-sm-flex justify-content-center justify-content-sm-between py-2">
                                <span style="z-index:999;" class="text-muted text-center text-sm-left d-block d-sm-inline-block">Copyright © <a href="#" target="_blank">ONYX </a>@DateTime.Now.Year</span>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
    </div>


    <div class="modal fade" id="exampleModalAuditFieldTests" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Audit Progress</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-4 mb-3 col-sm-12">
                            <div class="cardbox bg-primary">
                                <div class="card-body">
                                    <h5 class="card-title text-white">Audit Work Progress</h5>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-3 col-sm-12">
                            <div class="cardbox bg-secondary">
                                <div class="card-body">
                                    <h5 class="card-title text-white">Audit Team Monitoring</h5>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>




    <div class="modal fade" id="exampleModalAuditEngagement" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Planning Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Audit Field Work Weekly Meetings" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Year End Audit Closure Meeting" && p.View == true))
                {
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">IA Team Meetings</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Planning Meeting" && p.View == true))
                            {
                                <div class="col-md-4 mb-3 col-sm-12">
                                    <div class="cardbox bg-primary">
                                        <div class="card-body">
                                            <h5 class="card-title text-white">Audit Planning Meeting</h5>
                                        </div>
                                    </div>
                                </div>
                            }
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Audit Field Work Weekly Meetings" && p.View == true))
                            {
                                <div class="col-md-4 mb-3 col-sm-12">
                                    <div class="cardbox bg-secondary">
                                        <div class="card-body">
                                            <h5 class="card-title text-white">Audit Field Work Weekly Meetings</h5>
                                        </div>
                                    </div>
                                </div>
                            }
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Year End Audit Closure Meeting" && p.View == true))
                            {
                                <div class="col-md-4 mb-3 col-sm-12">
                                    <div class="cardbox bg-success">
                                        <div class="card-body">
                                            <h5 class="card-title text-white">Year End Audit Closure Meeting</h5>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }

                @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Kick Off Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Process Understanding Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Draft Audit Report Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Final Audit Report Meeting" && p.View == true) ||
                userPermissions.Any(p => p.Permission.Name == "Board Meeting" && p.View == true))
                {
                    <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLabel">IA and Client Meetings</h5>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Kick Off Meeting" && p.View == true))
                            {
                                <a href="#" onclick="downloadFile('/Reports/KickoffMeeting.docx', 'KickoffMeeting.docx')">
                                    <div class="col-md-4 mb-3 col-sm-12">
                                        <div class="cardbox bg-primary">
                                            <div class="card-body">
                                                <h5 class="card-title text-white">Kick Off Meeting</h5>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            }
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Process Understanding Meeting" && p.View == true))
                            {
                                <a href="#" onclick="downloadFile('/Reports/ProcessUnderstandingPurchasingDepartement.docx','ProcessUnderstandingPurchasingDepartement.docx')">
                                    <div class="col-md-4 mb-3 col-sm-12">
                                        <div class="cardbox bg-secondary">
                                            <div class="card-body">
                                                <h5 class="card-title text-white">Process Understanding Meeting</h5>
                                            </div>
                                        </div>
                                    </div>
                                </a>
                            }
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Draft Audit Report Meeting" && p.View == true))
                            {
                                <div class="col-md-4 mb-3 col-sm-12">
                                    <div class="cardbox bg-success">
                                        <div class="card-body">
                                            <h5 class="card-title text-white">Draft Audit Report Meeting</h5>
                                        </div>
                                    </div>
                                </div>
                            }
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Final Audit Report Meeting" && p.View == true))
                            {
                                <div class="col-md-4 mb-3 col-sm-12">
                                    <div class="cardbox bg-danger">
                                        <div class="card-body">
                                            <h5 class="card-title text-white">Final Audit Report Meeting</h5>
                                        </div>
                                    </div>
                                </div>
                            }
                            @if (userPermissions != null && userPermissions.Any(p => p.Permission.Name == "Board Meeting" && p.View == true))
                            {
                                <div class="col-md-4 mb-3 col-sm-12">
                                    <div class="cardbox bg-warning">
                                        <div class="card-body">
                                            <h5 class="card-title text-white">Board Meeting</h5>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>


    <script src="~/vendors/js/vendor.bundle.base.js"></script>
    <!-- endinject -->
    <!-- Plugin js for this page-->

    <script src="~/js/jquery.cookie.js" type="text/javascript"></script>
    <!-- End plugin js for this page-->
    <!-- inject:js -->
    <script src="~/js/off-canvas.js"></script>
    <script src="~/js/hoverable-collapse.js"></script>
    <script src="~/js/template.js"></script>
    <!-- endinject -->
    <!-- plugin js for this page -->
    <script src="~/js/jquery.cookie.js" type="text/javascript"></script>
    <!-- End plugin js for this page -->
    <!-- Custom js for this page-->
    <script src="~/js/dashboard.js"></script>
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
    <!-- End custom js for this page-->

    <script src="~/HeaderStyle/plugins/common/common.min.js"></script>
    <script src="~/vendors/chart/Chart.min.js"></script>
    <script src="~/js/chart.js"></script>

    <script>
        $(document).ready(function () {


            $(".Dates").datepicker({
                dateFormat: "dd-mm-yy",
                onSelect: function (dateText) {
                    updateDaysNumber();
                }
            });
            $("#Search").keyup(function () {
                var searchText = $(this).val().toLowerCase();
                $("#tableList tbody tr").each(function () {
                    var rowText = $(this).text().toLowerCase();
                    if (rowText.includes(searchText)) {
                        $(this).show();
                    } else {
                        $(this).hide();
                    }
                });
            });
        });


    </script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/jquery.validation/1.16.0/additional-methods.min.js"></script>


    <script>
        $(document).ready(function () {
            $(document).on("click", "#btnDelete", function () {
                var btnId = $(this);

                swal({
                    title: "Are you sure?",
                    text: "Once deleted, you will not be able to recover this data!",
                    icon: "warning",
                    buttons: true,
                    dangerMode: true,
                    confirmButtonText: "Yes, delete it!",
                })
                    .then((willDelete) => {
                        if (willDelete) {
                            $.ajax({
                                url: '/api/@ViewData["DeleteTitle"]/' + btnId.attr("data-actions-id"),
                                method: 'DELETE',
                                dataType: 'json',
                                contentType: 'application/json',
                                success: function (response) {
                                    swal({
                                        title: "Success",
                                        text: "The Delete is Successfully",
                                        icon: "success",
                                        timer: 2000,
                                        showConfirmButton: false
                                    });
                                    btnId.parents("#tr").remove();
                                },
                                error: function (error) {
                                    swal({
                                        title: "Error",
                                        text: "Failed to delete the data",
                                        icon: "error",
                                        timer: 2000,
                                        showConfirmButton: false
                                    });
                                }
                            });
                        } else {
                            swal("The data is safe!", {
                                icon: "info",
                                //timer: 2000,
                            });
                        }
                    });
            });



        });
    </script>

    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.20/summernote-bs5.min.js" integrity="sha512-6F1RVfnxCprKJmfulcxxym1Dar5FsT/V2jiEUvABiaEiFWoQ8yHvqRM/Slf0qJKiwin6IDQucjXuolCfCKnaJQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script>
        function downloadFile(filePath, fileName) {
            var link = document.createElement('a');
            link.href = filePath;
            link.download = fileName;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        }
    </script>

    <!--Header-->

    <script src="~/HeaderStyle/js/custom.min.js"></script>
    @RenderSection("Scripts", required: false)
</body>

</html>
